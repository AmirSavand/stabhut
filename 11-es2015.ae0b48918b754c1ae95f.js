(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{nocz:function(e,t,c){"use strict";c.r(t);var n=c("ofXK"),i=c("3Pt+"),o=c("tyNb"),b=c("6NWb"),r=c("fXoL");let l=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},imports:[[n.c,i.h,i.q,b.b]]}),e})();var s=c("H+bZ");let a=(()=>{class e{constructor(e){this.formBuilder=e,this.margin=!0,this.button=!0,this.save=new r.n}ngOnInit(){this.form=this.formBuilder.group({name:["",i.t.required]})}onSubmit(){this.save.emit(this.form.controls.name.value),this.form.patchValue({name:""})}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(i.c))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-form-add"]],inputs:{name:"name",margin:"margin",button:"button"},outputs:{save:"save"},decls:5,vars:6,consts:[[1,"form-group","input-group",3,"formGroup","ngSubmit"],["type","text","formControlName","name",1,"form-control",3,"placeholder","id"],[1,"input-group-append"],[1,"btn","btn-primary",3,"disabled"],["icon","plus"]],template:function(e,t){1&e&&(r.Pb(0,"form",0),r.Xb("ngSubmit",(function(){return t.onSubmit()})),r.Nb(1,"input",1),r.Pb(2,"div",2),r.Pb(3,"button",3),r.Nb(4,"fa-icon",4),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.Eb("mb-0",!t.margin),r.fc("formGroup",t.form),r.Ab(1),r.hc("placeholder","New ",t.name,""),r.fc("id",t.name),r.Ab(2),r.fc("disabled",t.form.invalid))},directives:[i.v,i.m,i.g,i.b,i.l,i.f,b.a],encapsulation:2}),e})();const u=function(e){return["../../../",e]};function d(e,t){if(1&e&&(r.Pb(0,"div",2),r.Pb(1,"div",3),r.Pb(2,"div",4),r.Pb(3,"div",5),r.Pb(4,"b"),r.zc(5),r.Ob(),r.zc(6," created by "),r.Pb(7,"b"),r.zc(8),r.Ob(),r.Pb(9,"a",6),r.Nb(10,"fa-icon",7),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e){const e=r.Zb();r.Ab(5),r.Ac(e.organization.name),r.Ab(3),r.Ac(e.organization.user.username),r.Ab(1),r.fc("routerLink",r.jc(3,u,e.organization.id))}}function f(e,t){if(1&e){const e=r.Qb();r.Pb(0,"li",19),r.Xb("click",(function(){r.rc(e);const c=t.$implicit,n=r.Zb(3);return n.projectSelected=c,n.labelSelected=null})),r.zc(1),r.Ob()}if(2&e){const e=t.$implicit,c=r.Zb(3);r.Eb("active",c.projectSelected===e),r.Ab(1),r.Bc(" ",e.name," ")}}function p(e,t){if(1&e&&(r.Pb(0,"ul",17),r.xc(1,f,2,3,"li",18),r.Ob()),2&e){const e=r.Zb(2);r.Ab(1),r.fc("ngForOf",e.projects)}}function m(e,t){if(1&e){const e=r.Qb();r.Pb(0,"li",19),r.Xb("click",(function(){r.rc(e);const c=t.$implicit,n=r.Zb(3);return n.labelSelected=c,n.projectSelected=null})),r.zc(1),r.Ob()}if(2&e){const e=t.$implicit,c=r.Zb(3);r.Eb("active",c.labelSelected===e),r.Ab(1),r.Bc(" ",e.name," ")}}function g(e,t){if(1&e&&(r.Pb(0,"ul",17),r.xc(1,m,2,3,"li",18),r.Ob()),2&e){const e=r.Zb(2);r.Ab(1),r.fc("ngForOf",e.labels)}}function h(e,t){if(1&e&&(r.Pb(0,"div",24),r.zc(1),r.Ob()),2&e){const e=r.Zb(3);r.Ab(1),r.Ac(e.projectSelected.name)}}function v(e,t){if(1&e&&(r.Pb(0,"div"),r.zc(1),r.Ob()),2&e){const e=r.Zb(3);r.Ab(1),r.Ac(e.labelSelected.name)}}function O(e,t){if(1&e){const e=r.Qb();r.Pb(0,"ul",25),r.Pb(1,"li",26),r.Pb(2,"div",27),r.Xb("click",(function(){return r.rc(e),r.Zb(3).projectTab="columns"})),r.zc(3," Columns "),r.Ob(),r.Ob(),r.Pb(4,"li",26),r.Pb(5,"div",27),r.Xb("click",(function(){return r.rc(e),r.Zb(3).projectTab="options"})),r.zc(6," Options "),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=r.Zb(3);r.Ab(2),r.Eb("active","columns"===e.projectTab),r.Ab(3),r.Eb("active","options"===e.projectTab)}}function P(e,t){if(1&e){const e=r.Qb();r.Pb(0,"div",31),r.Pb(1,"input",32),r.Xb("ngModelChange",(function(c){return r.rc(e),t.$implicit.name=c})),r.Ob(),r.Pb(2,"div",33),r.Pb(3,"button",34),r.Xb("click",(function(){r.rc(e);const c=t.$implicit;return r.Zb(4).deleteColumn(c)})),r.Nb(4,"fa-icon",35),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit;r.Ab(1),r.fc("ngModel",e.name)}}function j(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",36),r.Xb("click",(function(){return r.rc(e),r.Zb(4).updateColumns()})),r.zc(1," Update "),r.Ob()}}function A(e,t){if(1&e){const e=r.Qb();r.Pb(0,"div",5),r.xc(1,P,5,1,"div",28),r.Pb(2,"app-form-add",29),r.Xb("save",(function(t){return r.rc(e),r.Zb(3).addColumn(t)})),r.Ob(),r.xc(3,j,2,0,"button",30),r.Ob()}if(2&e){const e=r.Zb(3);r.Ab(1),r.fc("ngForOf",e.projectSelected.columns),r.Ab(1),r.fc("margin",e.projectSelected.columns.length>0),r.Ab(1),r.fc("ngIf",e.projectSelected.columns.length)}}function S(e,t){1&e&&r.Nb(0,"div",5)}function y(e,t){if(1&e){const e=r.Qb();r.Pb(0,"div",5),r.Pb(1,"div",31),r.Pb(2,"input",32),r.Xb("ngModelChange",(function(t){return r.rc(e),r.Zb(3).labelSelected.name=t})),r.Ob(),r.Pb(3,"div",33),r.Pb(4,"button",34),r.Xb("click",(function(){r.rc(e);const t=r.Zb(3);return t.deleteLabel(t.labelSelected)})),r.Nb(5,"fa-icon",35),r.Ob(),r.Ob(),r.Ob(),r.Pb(6,"div",37),r.Pb(7,"input",38),r.Xb("ngModelChange",(function(t){return r.rc(e),r.Zb(3).labelSelected.color=t})),r.Ob(),r.Ob(),r.Pb(8,"button",39),r.Xb("click",(function(){r.rc(e);const t=r.Zb(3);return t.updateLabel(t.labelSelected)})),r.zc(9,"Update"),r.Ob(),r.Ob()}if(2&e){const e=r.Zb(3);r.Ab(2),r.fc("ngModel",e.labelSelected.name),r.Ab(5),r.fc("ngModel",e.labelSelected.color)}}function Z(e,t){if(1&e&&(r.Pb(0,"div",9),r.Pb(1,"div",10),r.xc(2,h,2,1,"div",20),r.xc(3,v,2,1,"div",21),r.xc(4,O,7,4,"ul",22),r.Ob(),r.xc(5,A,4,3,"div",23),r.xc(6,S,1,0,"div",23),r.xc(7,y,10,2,"div",23),r.Ob()),2&e){const e=r.Zb(2);r.Ab(2),r.fc("ngIf",e.projectSelected),r.Ab(1),r.fc("ngIf",e.labelSelected),r.Ab(1),r.fc("ngIf",e.projectSelected),r.Ab(1),r.fc("ngIf","columns"===e.projectTab&&e.projectSelected&&e.projectSelected.columns),r.Ab(1),r.fc("ngIf","options"===e.projectTab&&e.projectSelected),r.Ab(1),r.fc("ngIf",e.labelSelected)}}function k(e,t){if(1&e){const e=r.Qb();r.Pb(0,"div",2),r.Pb(1,"div",8),r.Pb(2,"div",9),r.Pb(3,"div",10),r.zc(4,"Projects"),r.Ob(),r.xc(5,p,2,1,"ul",11),r.Pb(6,"div",5),r.Pb(7,"app-form-add",12),r.Xb("save",(function(t){return r.rc(e),r.Zb().addProject(t)})),r.Ob(),r.Ob(),r.Ob(),r.Pb(8,"div",13),r.Pb(9,"div",10),r.zc(10,"Labels"),r.Ob(),r.xc(11,g,2,1,"ul",11),r.Pb(12,"div",5),r.Pb(13,"app-form-add",14),r.Xb("save",(function(t){return r.rc(e),r.Zb().addLabel(t)})),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Pb(14,"div",15),r.xc(15,Z,8,6,"div",16),r.Ob(),r.Ob()}if(2&e){const e=r.Zb();r.Ab(5),r.fc("ngIf",e.projects),r.Ab(2),r.fc("margin",!1),r.Ab(4),r.fc("ngIf",e.labels),r.Ab(2),r.fc("margin",!1),r.Ab(2),r.fc("ngIf",e.projectSelected||e.labelSelected)}}let I=(()=>{class e{constructor(e,t){this.route=e,this.api=t,this.projectTab="columns"}ngOnInit(){this.route.params.subscribe(e=>{this.api.getOrganization(e.id).subscribe(e=>{this.organization=e}),this.api.getLabels(e.id).subscribe(e=>{this.labels=e}),this.api.getProjects(e.id).subscribe(t=>{this.projects=t,this.projectSelected=this.projects[0],this.api.getColumns(e.id).subscribe(e=>{for(const t of this.projects)t.columns=e.filter(e=>e.project===t.id)})})})}addProject(e){this.api.createProject(this.organization.id,e).subscribe(e=>{e.columns=[],this.projects.push(e)})}addLabel(e){this.api.createLabel(this.organization.id,e).subscribe(e=>{this.labels.push(e)})}addColumn(e){this.api.createColumn({project:this.projectSelected.id,name:e}).subscribe(e=>{this.projectSelected.columns.push(e)})}deleteColumn(e){confirm("Are you sure you want to delete this column?")&&this.api.deleteColumn(e.id).subscribe(()=>{const t=this.projectSelected.columns.indexOf(e);this.projectSelected.columns.splice(t,1)})}updateColumns(){for(let e of this.projectSelected.columns)this.api.updateColumn(e.id,{name:e.name}).subscribe(t=>{e=t})}updateLabel(e){this.api.updateLabel(e.id,{name:e.name,color:e.color}).subscribe(t=>{e=t})}deleteLabel(e){confirm("Are you sure you want to delete this label?")&&this.api.deleteLabel(e.id).subscribe(()=>{const t=this.labels.findIndex(t=>t.id===e.id);this.labels.splice(t,1),this.labelSelected=null})}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(o.a),r.Mb(s.a))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-settings"]],decls:3,vars:2,consts:[[1,"container","py-5"],["class","row justify-content-center",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-lg-8","mb-3"],[1,"card","bg-light"],[1,"card-body"],[1,"float-right",3,"routerLink"],["icon","arrow-circle-right"],[1,"col-lg-3","my-3"],[1,"card"],[1,"card-header"],["class","list-group list-group-flush pointer",4,"ngIf"],["name","project",3,"margin","save"],[1,"card","mt-3"],["name","label",3,"margin","save"],[1,"col-lg-5","my-3"],["class","card",4,"ngIf"],[1,"list-group","list-group-flush","pointer"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],["class","mb-3",4,"ngIf"],[4,"ngIf"],["class","nav nav-tabs card-header-tabs",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"mb-3"],[1,"nav","nav-tabs","card-header-tabs"],[1,"nav-item"],[1,"nav-link","pointer",3,"click"],["class","form-group input-group",4,"ngFor","ngForOf"],["name","column",3,"margin","save"],["class","btn btn-block btn-primary",3,"click",4,"ngIf"],[1,"form-group","input-group"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-secondary",3,"click"],["icon","trash"],[1,"btn","btn-block","btn-primary",3,"click"],[1,"form-group"],["type","color",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","btn-block",3,"click"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.xc(1,d,11,5,"div",1),r.xc(2,k,16,5,"div",1),r.Ob()),2&e&&(r.Ab(1),r.fc("ngIf",t.organization),r.Ab(1),r.fc("ngIf",t.projects))},directives:[n.l,o.d,b.a,a,n.k,i.b,i.l,i.o],styles:[""]}),e})();c.d(t,"SettingsModule",(function(){return x}));const z=[{path:"",component:I}];let x=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},imports:[[n.c,o.e.forChild(z),b.b,l,i.h]]}),e})()}}]);