(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{SSly:function(n,t,e){"use strict";e.r(t);var l=e("8Y7J"),a=e("lRx4"),i=e("H+bZ"),r=e("iInd");class u{constructor(n,t,e,l){this.api=n,this.organizationService=t,this.router=e,this.route=l}ngOnInit(){this.loadOrganization(),this.router.events.subscribe(n=>{n instanceof r.d&&this.loadOrganization()})}loadOrganization(){const n=Number(location.pathname.split("/organization/")[1].split("/")[0]);n&&(!this.organization||this.organization&&this.organization.id!==n)&&this.api.getOrganization(n).subscribe(n=>{this.organization=n,a.a.currentOrganization=this.organization,this.organizationService.initialise()})}}const o=()=>e.e(8).then(e.bind(null,"fNWq")).then(n=>n.HomeModuleNgFactory),s=()=>e.e(12).then(e.bind(null,"Y5kk")).then(n=>n.NewModuleNgFactory),c=()=>Promise.all([e.e(2),e.e(7)]).then(e.bind(null,"Wsce")).then(n=>n.CardModuleNgFactory),b=()=>e.e(9).then(e.bind(null,"OFhr")).then(n=>n.SettingsModuleNgFactory),h=()=>Promise.all([e.e(2),e.e(11)]).then(e.bind(null,"8F0Q")).then(n=>n.ProjectModuleNgFactory);class d{}var g=e("pMnS"),p=l.ob({encapsulation:0,styles:[[""]],data:{}});function j(n){return l.Mb(0,[(n()(),l.qb(0,0,null,null,2,"div",[["class","h-100"]],null,null,null,null,null)),(n()(),l.qb(1,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l.pb(2,212992,null,0,r.o,[r.b,l.M,l.j,[8,null],l.h],null,null)],(function(n,t){n(t,2,0)}),null)}function z(n){return l.Mb(0,[(n()(),l.qb(0,0,null,null,1,"app-organization",[],null,null,null,j,p)),l.pb(1,114688,null,0,u,[i.a,a.a,r.l,r.a],null,null)],(function(n,t){n(t,1,0)}),null)}var S=l.mb("app-organization",u,z,{},{},[]),v=e("SVse"),f=e("s7LF"),O=e("Nv++");e.d(t,"OrganizationModuleNgFactory",(function(){return w}));var w=l.nb(d,[],(function(n){return l.zb([l.Ab(512,l.j,l.Y,[[8,[g.a,S]],[3,l.j],l.v]),l.Ab(4608,v.m,v.l,[l.s,[2,v.y]]),l.Ab(4608,f.x,f.x,[]),l.Ab(1073742336,v.b,v.b,[]),l.Ab(1073742336,r.n,r.n,[[2,r.s],[2,r.l]]),l.Ab(1073742336,O.f,O.f,[]),l.Ab(1073742336,f.w,f.w,[]),l.Ab(1073742336,f.j,f.j,[]),l.Ab(1073742336,d,d,[]),l.Ab(1024,r.j,(function(){return[[{path:"",component:u,children:[{path:"home",loadChildren:o},{path:"new",loadChildren:s},{path:":id/card/:card",loadChildren:c},{path:":id/settings",loadChildren:b},{path:":id",loadChildren:h},{path:"**",redirectTo:"home",pathMatch:"full"}]}]]}),[])])}))},lRx4:function(n,t,e){"use strict";e.d(t,"a",(function(){return r}));var l=e("H+bZ"),a=e("2Vo4"),i=e("8Y7J");let r=(()=>{class n{constructor(n){this.api=n}static get currentOrganization(){return n.organizationSubject.getValue()}static set currentOrganization(t){n.projectsSubject.next(null),n.labelsSubject.next(null),n.usersSubject.next(null),n.organizationSubject.next(t)}static get isInitialised(){return Boolean(n.usersSubject.value&&n.labelsSubject.value&&n.projectsSubject.value)}initialise(){this.api.getProjects(n.currentOrganization.id).subscribe(t=>{n.projectsSubject.next(t)}),this.api.getLabels(n.currentOrganization.id).subscribe(t=>{n.labelsSubject.next(t)}),this.api.getUsers().subscribe(t=>{n.usersSubject.next(t.results)})}}return n.organizationSubject=new a.a(null),n.projectsSubject=new a.a(null),n.labelsSubject=new a.a(null),n.usersSubject=new a.a(null),n.organization=n.organizationSubject.asObservable(),n.projects=n.projectsSubject.asObservable(),n.labels=n.labelsSubject.asObservable(),n.users=n.usersSubject.asObservable(),n.ngInjectableDef=i.Qb({factory:function(){return new n(i.Rb(l.a))},token:n,providedIn:"root"}),n})()}}]);